<!DOCTYPE html>
<html>
  <head>
    <%= csrf_meta_tag %>

    <meta charset="utf-8" />

    <title><%= h(@page_title || application_name) %></title>
    <!-- application css -->
    <%= stylesheet_link_tag 'application' %>
    <%= yield(:css_head) %>

    <!-- application js -->
    <%= javascript_include_tag 'application' %>

    <!-- controller specific uploader -->
    <%= yield(:js_head) %>

    <script type="text/javascript">
      $(function() {
        <%= yield(:local_js) %>
      });
    </script>

    <%= render :partial => '/ga', :formats => [:html] %>

    <style type="text/css">
      <%= yield(:local_css) %>
    </style>
  </head>

<%# need a better way to determine if we are on the home page and using three col layout %>
<% if params[:controller].eql?("catalog") and !has_search_parameters? %>
  <% column_class = "three" %>
<% elsif not ['generic_files', 'batch', 'advanced', 'users', 'batch_edits'].include?(params[:controller]) %>
  <% column_class = "two" %>
<% else %>
  <% column_class = "one" %>
<% end %>
<body>
<div  id="wrapper">
  <div class="container">
    <div id="page-positioner">
      <%= render :partial => '/masthead', :formats => [:html] %>
      <%= render :partial => '/flash_msg' %>
      <div id="content-wrapper">
        <div id="content" class="row">
          <!-- 110 rows -->
          <% if column_class == "one" %>
            <div class="span110">
              <%= yield %>
            </div>
          <% else %>
            <div class="span17">
              <%= yield :sidebar %>
            </div><!-- /.span17 -->
            <% if column_class == "three" %>
              <div class="span63">
                <%= yield %>
              </div><!-- /.span63 -->

              <div class="span30 offset2">
              </div> <!-- /.span30 -->
            <% else %>
              <div class="span93">
                <%= yield %>
              </div><!-- /.span93 -->
            <% end %>
          <% end %>

        </div><!-- /#content -->
      </div><!-- /#content-wrapper -->
    </div><!-- /#page-positioner -->
  </div><!-- /.container -->
</div><!-- /#wrapper -->
<%= render partial: '/footer' %>
<div id="ajax-modal" class="modal hide fade" tabindex="-1"></div>
</body>
</html>
